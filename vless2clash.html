<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLESS è½¬ FlClash ä¸“ç”¨é…ç½®</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; background-color: #f5f5f7; color: #1d1d1f; }
        h1 { text-align: center; color: #000; }
        .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        input[type="text"] { width: 100%; padding: 0.8rem; border: 1px solid #d2d2d7; border-radius: 8px; margin-bottom: 1rem; box-sizing: border-box; font-size: 1rem; }
        button { background-color: #0071e3; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 1rem; width: 100%; transition: background-color 0.2s; }
        button:hover { background-color: #0077ed; }
        textarea { width: 100%; height: 400px; padding: 1rem; border: 1px solid #d2d2d7; border-radius: 8px; font-family: monospace; font-size: 0.9rem; margin-top: 1rem; box-sizing: border-box; white-space: pre; overflow-wrap: normal; overflow-x: scroll; }
        .icon-preview { text-align: center; margin-bottom: 1rem; }
        .icon-preview img { width: 48px; height: 48px; border-radius: 8px; }
    </style>
</head>
<body>

<div class="card">
    <h1>ğŸŒ± èŠéº» VLESS è½¬ YAML å·¥å…·</h1>
    
    <label for="vlessInput">ç²˜è´´ä½ çš„ VLESS é“¾æ¥:</label>
    <input type="text" id="vlessInput" placeholder="vless://uuid@ip:443?security=reality...">

    <div class="icon-preview">
        <p>å°†ä½¿ç”¨ä»¥ä¸‹å›¾æ ‡å’Œæ¨¡æ¿ï¼š</p>
        <img src="https://www.helloimg.com/i/2026/01/30/697c132a23439.jpg" alt="Icon">
    </div>

    <button onclick="convert()">ç”Ÿæˆé…ç½®æ–‡ä»¶</button>

    <textarea id="output" placeholder="ç”Ÿæˆçš„é…ç½®å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
    <button onclick="copyToClipboard()" style="margin-top: 10px; background-color: #34c759;">å¤åˆ¶é…ç½®</button>
</div>

<script>
    const ICON_URL = "https://www.helloimg.com/i/2026/01/30/697c132a23439.jpg";

    function convert() {
        const vlessLink = document.getElementById('vlessInput').value.trim();
        if (!vlessLink.startsWith('vless://')) {
            alert('è¯·è¾“å…¥æ­£ç¡®çš„ vless:// é“¾æ¥');
            return;
        }

        try {
            // è§£æ VLESS é“¾æ¥
            const urlObj = new URL(vlessLink);
            const uuid = urlObj.username;
            const server = urlObj.hostname;
            const port = urlObj.port;
            const params = new URLSearchParams(urlObj.search);
            const name = decodeURIComponent(urlObj.hash.slice(1)) || "èŠéº»-Reality";

            // æå–å‚æ•°
            const flow = params.get('flow') || "";
            const security = params.get('security') || "reality";
            const sni = params.get('sni') || "";
            const pbk = params.get('pbk') || "";
            const sid = params.get('sid') || "";
            const fp = params.get('fp') || "chrome";
            const type = params.get('type') || "tcp";

            // æ„å»º YAML æ¨¡æ¿ (å®Œå…¨ä½¿ç”¨ä½ çš„é…ç½®)
            const yamlContent = `# clash-config.yaml
# è‡ªåŠ¨ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString()}
# åŸºç¡€ç«¯å£è®¾ç½®
port: 7890
socks-port: 7891
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
ipv6: false

# DNS è®¾ç½®
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.localhost"
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - 'https://doh.pub/dns-query'
    - 'https://dns.alidns.com/dns-query'
  fallback:
    - 'https://1.1.1.1/dns-query'
    - 'https://dns.google/dns-query'
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ä»£ç†èŠ‚ç‚¹
proxies:
  - name: "${name}"
    type: vless
    server: ${server}
    port: ${port}
    uuid: ${uuid}
    network: ${type}
    tls: true
    udp: true
    flow: ${flow}
    servername: ${sni}
    client-fingerprint: ${fp}
    icon: "${ICON_URL}"
    reality-opts:
      public-key: ${pbk}
      short-id: ${sid}

# ä»£ç†ç»„
proxy-groups:
  - name: ğŸ± çŒ«çŒ«åŸºåœ°
    type: select
    icon: "${ICON_URL}"
    proxies:
      - "${name}"
      - DIRECT

# è§„åˆ™
rules:
  # === å¹¿å‘Šä¸éšç§æ‹¦æˆª ===
  - DOMAIN-KEYWORD,adservice,REJECT
  - DOMAIN-SUFFIX,googleadservices.com,REJECT

  # === å±€åŸŸç½‘ ===
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT

  # === å›½å†…åŸŸåç›´è¿ ===
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-KEYWORD,-cn,DIRECT
  - DOMAIN-SUFFIX,126.net,DIRECT
  - DOMAIN-SUFFIX,163.com,DIRECT
  - DOMAIN-SUFFIX,360buyimg.com,DIRECT
  - DOMAIN-SUFFIX,alicdn.com,DIRECT
  - DOMAIN-SUFFIX,alipay.com,DIRECT
  - DOMAIN-SUFFIX,baidu.com,DIRECT
  - DOMAIN-SUFFIX,bilibili.com,DIRECT
  - DOMAIN-SUFFIX,jd.com,DIRECT
  - DOMAIN-SUFFIX,qq.com,DIRECT
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,weibo.com,DIRECT
  - DOMAIN-SUFFIX,zhihu.com,DIRECT

  # === å¼ºåˆ¶èµ°ä»£ç† ===
  - DOMAIN-SUFFIX,google.com,ğŸ± çŒ«çŒ«åŸºåœ°
  - DOMAIN-SUFFIX,youtube.com,ğŸ± çŒ«çŒ«åŸºåœ°
  - DOMAIN-SUFFIX,github.com,ğŸ± çŒ«çŒ«åŸºåœ°
  - DOMAIN-SUFFIX,telegram.org,ğŸ± çŒ«çŒ«åŸºåœ°
  - DOMAIN-SUFFIX,twitter.com,ğŸ± çŒ«çŒ«åŸºåœ°
  - DOM